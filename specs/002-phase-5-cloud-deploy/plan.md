# Implementation Plan: Phase 5 - Advanced Cloud Deployment

**Branch**: `002-phase-5-cloud-deploy` | **Date**: 2025-12-30 | **Spec**: [spec.md](./spec.md)
**Input**: Feature specification from `/specs/002-phase-5-cloud-deploy/spec.md`
**Builds Upon**: Phase 4 - Local Kubernetes Deployment

**Note**: This plan is generated by the `/sp.plan` command. See `.specify/templates/commands/plan.md` for the execution workflow.

## Summary

Phase 5 transforms the Phase 4 locally deployed Evolution of Todo application into a production-grade, event-driven, distributed microservices platform. The implementation spans three major parts:

1. **Part A: Advanced Features** - Priorities, tags, due dates, reminders, recurring tasks, search/filter/sort capabilities
2. **Part B: Event-Driven Architecture** - Kafka/Redpanda event streaming with full Dapr integration (Pub/Sub, State, Jobs API, Secrets)
3. **Part C: Cloud Deployment** - GitHub Actions CI/CD with DigitalOcean DOKS production deployment

**Technical Approach**:
- Event-driven microservices architecture using Dapr as abstraction layer
- Four new microservices: WebSocket (real-time sync), Notification, Recurring Task, Audit
- Local development on Minikube with Strimzi Kafka, production on DOKS with Redpanda Cloud
- GitOps deployment via GitHub Actions with Helm

## Technical Context

**Languages/Versions**:
| Component | Language/Framework | Version |
|-----------|-------------------|---------|
| Frontend | Next.js (TypeScript) | 16+ |
| Backend | Python | 3.13+ |
| Backend Framework | FastAPI | 0.115+ |
| ORM | SQLModel | 0.0.24+ |
| AI Agent | OpenAI Agents SDK | Latest |
| MCP Server | FastMCP | Latest |
| Event Streaming | Kafka (Strimzi/Redpanda) | Latest |
| Distributed Runtime | Dapr | 1.14+ |
| Container Runtime | Docker | Latest |
| Orchestration | Kubernetes | 1.28+ |
| Package Manager | Helm | 3.15+ |
| CI/CD | GitHub Actions | Latest |

**Primary Dependencies**:
| Category | Dependencies |
|----------|--------------|
| Backend | FastAPI, SQLModel, Pydantic, Dapr SDK, aiokafka |
| Frontend | Next.js, React, Shadcn/ui, Zustand, Axios, ChatKit |
| Infrastructure | Kubernetes, Helm, Dapr, Strimzi/Redpanda |
| CI/CD | GitHub Actions, doctl, kubectl |

**Storage**:
| Service | Type | Purpose |
|---------|------|---------|
| Neon PostgreSQL | Serverless (External) | Primary database |
| Redpanda Cloud | Managed Kafka | Event streaming (Production) |
| Strimzi Kafka | Self-hosted | Event streaming (Local) |
| Kubernetes Secrets | Cloud Secrets | Secret management |
| Dapr State Store | PostgreSQL-backed | Conversation state |

**Testing**:
| Type | Tool | Coverage Target |
|------|------|-----------------|
| Unit Tests | pytest | 80% backend |
| Integration Tests | pytest + Minikube | All event flows |
| E2E Tests | Manual | All user journeys |
| Helm Validation | helm lint | 100% |
| CI Pipeline | GitHub Actions | All PRs |

**Target Platform**:
- **Development**: Minikube (3 nodes) with Dapr + Strimzi Kafka
- **Staging**: Cloud K8s (PR deployments)
- **Production**: DigitalOcean DOKS (Primary)

**Project Type**: Monorepo (web application + microservices)

**Performance Goals**:
| Metric | Target |
|--------|--------|
| Task search response | <500ms |
| Event publish latency | <100ms |
| Kafka consumer lag | <1000 messages |
| Reminder delivery accuracy | Within 1 minute |
| CI/CD pipeline | <10 minutes |
| Cloud deployment | <5 minutes |
| Real-time sync latency | <1 second |

**Constraints**:
| Constraint | Target |
|------------|--------|
| Service availability | 99.9% |
| Concurrent users | 1000 |
| Memory per pod | <512MB |
| Message broker availability | Graceful degradation on failure |

**Scale/Scope**:
- 4 new microservices (WebSocket, Notification, Recurring, Audit)
- 3 Kafka topics (task-events, reminders, task-updates)
- 6 Dapr building blocks (Pub/Sub, State, Secrets, Service Invocation, Jobs API, Resiliency)
- 7 services total in Kubernetes cluster

## Constitution Check

*GATE: Must pass before Phase 0 research. Re-check after Phase 1 design.*

### Phase 5 Constitution Gates (NON-NEGOTIABLE)

| Principle | Gate | Status | Evidence |
|-----------|------|--------|----------|
| **XVII. Event-Driven Architecture** | All task CRUD publishes to Kafka via Dapr | PASS | spec.md FR-EDA-001 to FR-EDA-012 define event publishing |
| **XVIII. Dapr Abstraction Layer** | No direct Kafka clients, use Dapr Pub/Sub | PASS | Plan uses Dapr SDK, not kafka-python |
| **XIX. Stateless Services** | All state in DB or Dapr State Store | PASS | Conversation state in PostgreSQL, no in-memory state |
| **XX. GitOps Deployment** | GitHub Actions for all deployments | PASS | spec.md FR-CICD-001 to FR-CICD-006 define CI/CD |
| **XXI. Multi-Environment Parity** | Same Dapr components, different backends | PASS | Plan uses same Helm chart with environment values |
| **XXII. Observability First** | Prometheus + Grafana + Dapr metrics | PASS | spec.md US-15 defines monitoring requirements |
| **XXIII. Resilience Patterns** | Circuit breakers, retries via Dapr | PASS | Dapr resiliency policies planned |
| **XXIV. Security by Default** | mTLS, RBAC, Network Policies | PASS | NFR-SEC-001 to NFR-SEC-006 define security |

### Phase 2-4 Constitution Gates (Foundation)

| Principle | Gate | Status | Evidence |
|-----------|------|--------|----------|
| **I. Spec-Driven Development** | Feature spec written before implementation | PASS | spec.md created with 16 user stories |
| **II. Monorepo Architecture** | Independent services in single repo | PASS | `/services/` directory for new microservices |
| **III. Test-First Development** | Tests written before implementation | PASS | Test coverage targets defined |
| **IV. Authentication First** | JWT validation on all endpoints | PASS | Existing auth middleware reused |
| **V. API-First Design** | API contracts documented | PASS | REST endpoints + event schemas in spec |
| **VI. Database-First Schema** | Schema defined before models | PASS | Entity definitions in spec.md |
| **X. Stateless Architecture** | Server holds no in-memory state | PASS | Database-persisted conversations |
| **XI. MCP-First Tool Design** | Tasks exposed as MCP tools | PASS | Existing MCP tools extended |

### Gate Violations (NONE)

No constitution violations identified. All gates pass.

## Project Structure

### Documentation (this feature)

```text
specs/002-phase-5-cloud-deploy/
├── spec.md              # Feature specification (completed)
├── plan.md              # This file
├── research.md          # Phase 0 output - technology research
├── data-model.md        # Phase 1 output - entity definitions
├── quickstart.md        # Phase 1 output - setup guide
├── contracts/           # Phase 1 output - API contracts
│   ├── rest-api.yaml    # OpenAPI spec for new endpoints
│   ├── event-schemas.json # Kafka event schemas
│   └── dapr-components.yaml # Dapr component definitions
└── tasks.md             # Phase 2 output (created by /sp.tasks)
```

### Source Code (repository root)

```text
# Web Application + Microservices Structure

backend/                           # FastAPI Backend (Phase 2+)
├── src/
│   ├── models/
│   │   ├── task.py               # UPDATED - priority, due_date, recurring
│   │   ├── tag.py                # NEW - Tag model
│   │   ├── task_tag.py           # NEW - Junction table
│   │   └── reminder.py           # NEW - Reminder model
│   ├── routers/
│   │   ├── tasks.py              # UPDATED - filter/sort/search
│   │   ├── tags.py               # NEW - Tag CRUD
│   │   └── reminders.py          # NEW - Reminder management
│   ├── services/
│   │   ├── event_publisher.py    # NEW - Dapr Pub/Sub wrapper
│   │   ├── dapr_client.py        # NEW - Dapr SDK client
│   │   └── search_service.py     # NEW - Full-text search
│   ├── agents/                   # AI Agent (Phase 3)
│   └── mcp_server/
│       └── tools/
│           ├── task_tools.py     # UPDATED - advanced features
│           ├── tag_tools.py      # NEW - Tag MCP tools
│           └── reminder_tools.py # NEW - Reminder MCP tools
├── alembic/
│   └── versions/
│       └── xxx_add_phase5.py     # NEW - Phase 5 migration
├── tests/
└── Dockerfile                    # UPDATED - Dapr SDK added

services/                          # NEW - Microservices Directory
├── notification-service/
│   ├── src/
│   │   ├── main.py              # FastAPI app
│   │   ├── consumer.py          # Dapr subscription handler
│   │   └── notifier.py          # In-app notification logic
│   ├── Dockerfile
│   └── pyproject.toml
│
├── recurring-task-service/
│   ├── src/
│   │   ├── main.py              # FastAPI app
│   │   ├── consumer.py          # Dapr subscription handler
│   │   └── scheduler.py         # Next occurrence calculator
│   ├── Dockerfile
│   └── pyproject.toml
│
├── audit-service/
│   ├── src/
│   │   ├── main.py              # FastAPI app
│   │   ├── consumer.py          # Dapr subscription handler
│   │   └── logger.py            # Audit log storage
│   ├── Dockerfile
│   └── pyproject.toml
│
└── websocket-service/            # NEW - Real-time sync service
    ├── src/
    │   ├── main.py              # FastAPI app with WebSocket
    │   ├── consumer.py          # Dapr subscription for task-updates
    │   └── broadcaster.py       # WebSocket connection manager
    ├── Dockerfile
    └── pyproject.toml

frontend/                          # Next.js Frontend (Phase 2+)
├── app/
│   └── tasks/
│       └── page.tsx              # UPDATED - filter/sort UI
├── components/
│   ├── tasks/
│   │   ├── priority-selector.tsx # NEW
│   │   ├── tag-manager.tsx       # NEW
│   │   ├── due-date-picker.tsx   # NEW
│   │   ├── reminder-scheduler.tsx # NEW
│   │   ├── filter-bar.tsx        # NEW
│   │   ├── sort-dropdown.tsx     # NEW
│   │   └── search-input.tsx      # NEW
│   └── recurring/
│       └── recurring-pattern.tsx  # NEW
├── stores/
│   └── task-store.ts             # UPDATED - filter/sort state
├── lib/
│   └── websocket/
│       └── sync-client.ts        # NEW - WebSocket client for real-time sync
└── Dockerfile

dapr-components/                   # NEW - Dapr Configuration
├── pubsub-kafka.yaml             # Kafka Pub/Sub component
├── statestore-postgres.yaml      # PostgreSQL state store
├── secretstore-kubernetes.yaml   # K8s secrets store
├── secretstore-azure.yaml        # Azure KeyVault (production)
└── resiliency.yaml               # Circuit breaker policies

helm/
└── todo-app/
    ├── Chart.yaml                # UPDATED - Phase 5 version
    ├── values.yaml               # Base values
    ├── values-staging.yaml       # NEW - Staging environment
    ├── values-prod.yaml          # UPDATED - Production + Dapr
    └── templates/
        ├── dapr-components.yaml  # NEW - Dapr components
        ├── notification-deployment.yaml  # NEW
        ├── recurring-task-deployment.yaml # NEW
        ├── audit-deployment.yaml  # NEW
        ├── websocket-deployment.yaml # NEW
        └── kafka-topics.yaml      # NEW - Topic configuration

.github/
└── workflows/
    ├── ci.yaml                   # NEW - Test + lint
    ├── build.yaml                # NEW - Build images
    └── deploy.yaml               # NEW - Deploy to cloud

docs/
├── DAPR-INTEGRATION.md           # NEW
├── KAFKA-SETUP.md                # NEW
├── CLOUD-DEPLOYMENT.md           # NEW
├── EVENT-SCHEMAS.md              # NEW
└── RUNBOOKS.md                   # NEW
```

**Structure Decision**:
- Web application + microservices monorepo structure
- New `/services/` directory for Phase 5 microservices (Notification, Recurring Task, Audit, WebSocket)
- Dapr components in `/dapr-components/` for local development
- Production Dapr components baked into Helm chart
- GitHub Actions workflows in `/.github/workflows/`

## Complexity Tracking

No constitution violations requiring justification. All complexity is within constitution guidelines.

## Architecture Decisions

### AD-01: Dapr vs Direct Kafka Client

**Decision**: Use Dapr Pub/Sub to abstract Kafka

**Rationale**:
- Dapr provides infrastructure abstraction (swap Kafka for RabbitMQ without code changes)
- Built-in retries, dead letter queues
- Consistent API across all building blocks
- mTLS between services included
- Aligns with Constitution Principle XVIII

**Trade-offs**:
- Pro: Portability, abstraction, resilience features
- Con: Learning curve, sidecar overhead (~20MB per pod)

### AD-02: Separate Microservices vs Monolith Extension

**Decision**: Create 4 new microservices (WebSocket, Notification, Recurring Task, Audit)

**Rationale**:
- Single Responsibility Principle
- Independent scaling based on load
- Failure isolation
- Follows hackathon architecture diagram

**Trade-offs**:
- Pro: Scalability, isolation, maintainability
- Con: More deployments, inter-service complexity

### AD-03: Dapr Jobs API vs Cron Bindings

**Decision**: Use Dapr Jobs API for scheduled reminders

**Rationale**:
- Exact-time delivery (not polling-based)
- No database scanning overhead
- Dapr manages job state across restarts
- More efficient than cron polling

**Trade-offs**:
- Pro: Precise timing, no polling, scalable
- Con: Requires callback endpoint, newer API

### AD-04: Cloud Provider Selection

**Decision**: DigitalOcean DOKS as sole target (per spec clarification)

**Rationale**:
- Hackathon specification explicitly mentions DigitalOcean DOKS for Phase V
- $200 credit for 60 days (generous trial period)
- Simple, developer-friendly Kubernetes experience
- Native container registry (DOCR) integration

### AD-05: Message Broker Selection

**Decision**: Redpanda Cloud (Kafka-compatible) as sole target (per spec clarification)

**Rationale**:
- Free serverless tier
- Kafka-compatible (same client code works)
- No Zookeeper required (simpler)
- Dapr abstracts the choice

### AD-06: WebSocket vs SSE for Real-time Sync

**Decision**: Dedicated WebSocket Service consuming Kafka topic

**Rationale**:
- Bi-directional communication (future use)
- Better connection management
- Fan-out pattern for multi-client sync
- Separates real-time concerns from main backend

## Component Breakdown

### 1. Advanced Features Layer (Part A)

```
Advanced Features Layer
├── Database Models
│   ├── Task (UPDATED)
│   │   ├── priority: enum (high/medium/low)
│   │   ├── due_date: datetime
│   │   ├── reminder_at: datetime
│   │   ├── recurring_pattern: string (daily/weekly/monthly)
│   │   └── next_occurrence: datetime
│   │
│   ├── Tag (NEW)
│   │   ├── id, user_id, name, color
│   │   └── Relationship: many-to-many with Task
│   │
│   ├── TaskTag (NEW - Junction)
│   │   └── task_id, tag_id
│   │
│   └── Reminder (NEW)
│       └── id, task_id, user_id, remind_at, status, sent_at
│
├── API Endpoints
│   ├── GET /tasks?priority=high&tags=work&due_before=2026-01-15&search=meeting&sort=due_date
│   ├── POST/GET/PUT/DELETE /tags
│   └── POST/DELETE /tasks/{id}/reminder
│
├── MCP Tools (UPDATED)
│   ├── add_task (+ priority, due_date, tags, recurring)
│   ├── list_tasks (+ filter, sort, search)
│   ├── schedule_reminder
│   ├── add_tag, list_tags
│   └── search_tasks
│
└── Frontend Components
    ├── PrioritySelector
    ├── TagManager
    ├── DueDatePicker
    ├── ReminderScheduler
    ├── FilterBar
    ├── SortDropdown
    └── SearchInput
```

### 2. Event-Driven Architecture Layer (Part B)

```
Event-Driven Architecture Layer
├── Dapr Building Blocks
│   ├── Pub/Sub (pubsub.kafka)
│   │   └── Broker: Strimzi (local) / Redpanda Cloud (prod)
│   │
│   ├── State Management (state.postgresql)
│   │   └── Backend: Neon PostgreSQL
│   │
│   ├── Secrets (secretstores.kubernetes / azure-keyvault)
│   │   └── Store: K8s Secrets (local) / Cloud Vault (prod)
│   │
│   └── Jobs API (scheduler)
│       └── Purpose: Exact-time reminder scheduling
│
├── Kafka Topics
│   ├── task-events
│   │   ├── Events: created, updated, completed, deleted
│   │   ├── Producer: Backend API
│   │   └── Consumers: Recurring Task Service, Audit Service, WebSocket Service
│   │
│   ├── reminders
│   │   ├── Events: reminder.scheduled, reminder.due
│   │   ├── Producer: Backend API, Dapr Jobs
│   │   └── Consumer: Notification Service
│   │
│   └── task-updates
│       ├── Events: sync
│       ├── Producer: Backend API, All Services
│       └── Consumer: WebSocket Service
│
├── New Microservices
│   ├── WebSocket Service (Port 8005) - NEW
│   │   ├── Subscribes: task-updates topic
│   │   ├── Actions: Broadcast to connected WebSocket clients
│   │   └── Dapr App ID: websocket-service
│   │
│   ├── Notification Service (Port 8002)
│   │   ├── Subscribes: reminders topic
│   │   ├── Actions: Send in-app notification, publish to task-updates
│   │   └── Dapr App ID: notification-service
│   │
│   ├── Recurring Task Service (Port 8003)
│   │   ├── Subscribes: task-events (completed)
│   │   ├── Actions: Create next occurrence, publish to task-events
│   │   └── Dapr App ID: recurring-task-service
│   │
│   └── Audit Service (Port 8004)
│       ├── Subscribes: task-events (all)
│       ├── Actions: Log to audit table
│       └── Dapr App ID: audit-service
│
└── Event Flow
    User Action → Backend → Dapr Pub/Sub → Kafka → Consumer Services
```

### 3. CI/CD Pipeline Layer (Part C)

```
CI/CD Pipeline Layer
├── GitHub Actions Workflows
│   ├── ci.yaml (on: pull_request)
│   │   ├── Run backend tests (pytest)
│   │   ├── Run frontend tests (npm test)
│   │   ├── Lint Helm charts
│   │   └── Validate K8s manifests
│   │
│   ├── build.yaml (on: push to main)
│   │   ├── Build Docker images
│   │   ├── Tag with commit SHA
│   │   └── Push to DOCR
│   │
│   └── deploy.yaml (on: push to main)
│       ├── Deploy to staging (on PR)
│       └── Deploy to production (on main merge)
│
├── Container Registry
│   ├── DOCR (registry.digitalocean.com)
│   │   └── Images: frontend, backend, mcp-server, notification, recurring, audit, websocket
│   │
│   └── Tags: latest, {commit-sha}, v{version}
│
└── Deployment Strategy
    ├── Helm upgrade --install
    ├── Rolling updates (zero downtime)
    └── Rollback via helm rollback or git revert
```

### 4. Cloud Deployment Layer (Part C)

```
Cloud Deployment Layer
├── Kubernetes Cluster
│   ├── Provider: DigitalOcean DOKS
│   │   └── $200 credit / 60 days
│   │
│   ├── Node Configuration
│   │   ├── Minimum: 2 nodes, 2 vCPU, 4GB RAM each
│   │   └── Recommended: 3 nodes for HA
│   │
│   └── Installed Components
│       ├── Dapr runtime
│       ├── NGINX Ingress Controller
│       ├── cert-manager (TLS)
│       └── Prometheus + Grafana
│
├── Kafka Cloud
│   └── Redpanda Cloud (Free Serverless)
│       └── Topics: task-events, reminders, task-updates
│
├── Secrets Management
│   └── DigitalOcean: K8s Secrets + DOCR
│
└── Monitoring
    ├── Prometheus (metrics collection)
    ├── Grafana (dashboards)
    └── Dapr Dashboard (service mesh visibility)
```

## High-Level Sequencing

### Implementation Phases

```
PART A: ADVANCED FEATURES
═══════════════════════════════════════════════════════════════════
Week 1: Database & Backend
├── Update Task model (priority, due_date, recurring fields)
├── Create Tag model with many-to-many relationship
├── Create Reminder model
├── Run Alembic migrations
├── Add filter/sort/search API endpoints
├── Create Tag CRUD endpoints
└── Create Reminder endpoints

Week 2: MCP Tools & Frontend
├── Update MCP tools for advanced features
├── Create frontend filter/sort/search components
├── Create priority selector, tag manager, date picker
└── Test all features via chatbot

PART B: EVENT-DRIVEN ARCHITECTURE
═══════════════════════════════════════════════════════════════════
Week 3: Dapr & Kafka Setup
├── Install Dapr on Minikube
├── Deploy Strimzi Kafka on Minikube
├── Configure Dapr Pub/Sub, State, Secrets components
├── Create event publisher service
└── Publish task events on CRUD operations

Week 4: Consumer Services
├── Create WebSocket Service (real-time sync)
├── Create Notification Service
├── Create Recurring Task Service
├── Create Audit Service
├── Implement Dapr Jobs API for reminders
└── Test event flow end-to-end

PART C: CLOUD DEPLOYMENT
═══════════════════════════════════════════════════════════════════
Week 5: CI/CD & Cloud
├── Create GitHub Actions CI workflow
├── Create build and deploy workflows
├── Create DigitalOcean DOKS cluster
├── Install Dapr on DOKS
├── Configure Redpanda Cloud
└── Deploy via CI/CD pipeline

Week 6: Monitoring & Polish
├── Deploy Prometheus + Grafana
├── Configure TLS (cert-manager)
├── End-to-end testing
└── Documentation and runbooks
```

## System Responsibilities

| Component | Responsibilities | Dependencies |
|-----------|-----------------|--------------|
| Frontend | UI, filter/sort/search, priority/tag selection, WebSocket client | Backend API, WebSocket Service |
| Backend API | Task CRUD, event publishing, reminder scheduling | MCP Server, Dapr Pub/Sub, Neon DB |
| MCP Server | AI agent tools for task operations | Neon DB |
| WebSocket Service | Real-time multi-client sync | Dapr Pub/Sub (task-updates topic) |
| Notification Service | In-app notifications when reminder due | Dapr Pub/Sub (reminders topic) |
| Recurring Task Service | Auto-create next occurrence | Dapr Pub/Sub (task-events topic), Backend API |
| Audit Service | Log all task operations | Dapr Pub/Sub (task-events topic) |
| Dapr Sidecar | Pub/Sub, State, Secrets, Service Invocation | Kafka, Neon, K8s Secrets |
| Kafka (Strimzi/Redpanda) | Event streaming, topic management | - |
| GitHub Actions | CI/CD pipeline | DOCR, DigitalOcean DOKS |

## Non-Functional Requirements

### Performance

| NFR | Target | Measurement |
|-----|--------|-------------|
| Task search response | <500ms | API response time |
| Event publish latency | <100ms | Dapr publish time |
| Kafka consumer lag | <1000 messages | Kafka metrics |
| Reminder accuracy | Within 1 minute | Job callback time |
| Real-time sync | <1 second | WebSocket delivery |
| CI/CD pipeline | <10 minutes | GitHub Actions time |

### Reliability

| NFR | Target | Measurement |
|-----|--------|-------------|
| Event delivery | At-least-once | Kafka acknowledgment |
| Service availability | 99.9% | Uptime monitoring |
| Retry on failure | 3 attempts with backoff | Dapr resiliency |
| Circuit breaker | Open after 5 failures | Dapr resiliency |

### Security

| NFR | Target | Measurement |
|-----|--------|-------------|
| Service communication | mTLS via Dapr | Dapr Sentry |
| Secrets in git | 0 | Code scan |
| Kafka authentication | SASL | Redpanda config |
| API authentication | JWT required | Middleware |

## Risk Analysis

### Top 5 Risks

| # | Risk | Impact | Probability | Mitigation |
|---|------|--------|-------------|------------|
| 1 | Dapr learning curve | High | High | Start with Pub/Sub only, add incrementally |
| 2 | Kafka complexity | High | Medium | Use Dapr abstraction, Redpanda simplifies |
| 3 | Cloud cost overrun | Medium | Medium | Use free tiers, set budget alerts |
| 4 | CI/CD setup time | Medium | Medium | Use template workflows |
| 5 | Time constraints | High | High | Prioritize Part A+B, Part C can be partial |

## Evaluation and Validation

### Definition of Done - Part A

- [ ] Task model updated with priority, due_date, recurring fields
- [ ] Tag model created with many-to-many relationship
- [ ] Reminder model created
- [ ] Alembic migration applied successfully
- [ ] Filter/sort/search API endpoints working
- [ ] Tag CRUD endpoints working
- [ ] Reminder endpoints working
- [ ] All MCP tools updated for advanced features
- [ ] Frontend components created
- [ ] Advanced features working via chatbot

### Definition of Done - Part B

- [ ] Dapr installed on Minikube
- [ ] Strimzi Kafka deployed and running
- [ ] Dapr components configured (Pub/Sub, State, Secrets)
- [ ] Task events published on all CRUD operations
- [ ] WebSocket Service syncing updates to connected clients
- [ ] Notification Service consuming reminders
- [ ] Recurring Task Service creating next occurrences
- [ ] Audit Service logging all events
- [ ] Dapr Jobs API scheduling reminders
- [ ] End-to-end event flow verified

### Definition of Done - Part C

- [ ] GitHub Actions CI workflow passing
- [ ] GitHub Actions build workflow pushing images to DOCR
- [ ] GitHub Actions deploy workflow working
- [ ] DigitalOcean DOKS cluster created
- [ ] Dapr installed on DOKS cluster
- [ ] Redpanda Cloud configured
- [ ] Cloud secrets configured
- [ ] TLS/SSL configured
- [ ] Prometheus + Grafana deployed
- [ ] Application accessible via cloud URL
- [ ] Real-time sync working across clients
- [ ] End-to-end testing passed

## References

### Core Documentation
- [Phase 5 Specification](./spec.md)
- [Phase 5 Constitution](../../constitution-prompt-phase-5.md)
- [Phase 4 Plan](../001-k8s-local-deploy/plan.md)

### Technology Documentation
- [Dapr Documentation](https://docs.dapr.io/)
- [Dapr Pub/Sub](https://docs.dapr.io/developing-applications/building-blocks/pubsub/)
- [Dapr Jobs API](https://docs.dapr.io/developing-applications/building-blocks/jobs/)
- [Strimzi Operator](https://strimzi.io/documentation/)
- [Redpanda Cloud](https://docs.redpanda.com/current/deploy/deployment-option/cloud/)
- [DigitalOcean DOKS](https://docs.digitalocean.com/products/kubernetes/)
- [GitHub Actions](https://docs.github.com/en/actions)

---

**Plan Version**: 1.0.0
**Created**: 2025-12-30
**Phase**: Phase 5 - Advanced Cloud Deployment
**Next Step**: Run `/sp.tasks` to generate implementation tasks from this plan.
